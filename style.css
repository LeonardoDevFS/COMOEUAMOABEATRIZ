/* ===== Estilo Roxo "Emo-Romântico" Final v9 (Recursos Interativos) ===== */

/* Variáveis de Cor */
:root {
   --body-bg: #121212; /* Quase preto */
   --bg-gradient-start: #1f1f1f; /* Cinza muito escuro para gradientes sutis */
   --bg-gradient-end: #161616;
   --header-footer-bg: rgba(10, 0, 5, 0.4); /* Fundo quase preto semi-transparente */
   --text-light: #e0e0e0; /* Branco levemente acinzentado */
   --accent-purple: #8A2BE2; /* Roxo Violeta Azulado (cor principal) */
   --accent-secondary: #b0b0b0; /* Cinza claro / Prata */
   --accent-pink-muted: #b48ead; /* Rosa antigo / Lilás acinzentado para corações */
   --shadow-color: rgba(0, 0, 0, 0.6); /* Sombra mais escura */
   --flower-yellow: #FFD700; /* Amarelo para flores */
   --flower-purple: var(--accent-purple); /* Roxo para flores */
   --letter-bg: #f8f8f8; /* Papel quase branco */
   --letter-text: #2c2c2c; /* Texto da carta bem escuro */
   --letter-accent: var(--accent-purple); /* Destaque roxo na carta */
   --scrollbar-track-bg: #282828; /* Fundo da barra de rolagem */
   --scrollbar-thumb-bg: #5a3a7a; /* Cor do 'polegar' da barra de rolagem */
   --scrollbar-thumb-hover-bg: var(--accent-purple); /* Cor do 'polegar' no hover */
   --quote-border-color: var(--accent-purple); /* Cor da borda da citação */
   --loader-color: var(--accent-pink-muted); /* Cor do coração do preloader */
   --media-border-color: rgba(176, 176, 176, 0.4); /* Prata semi-transparente p/ borda de mídia */
   --envelope-gradient-start: #3c1f4a; /* Gradiente do envelope (fundo da carta) */
   --envelope-gradient-end: #2a1a30;
   /* Novas cores para variações de flores */
   --flower-pink-subtle: #FFB6C1; /* Rosa claro sutil */
   --flower-sparkle-color: rgba(255, 223, 186, 0.8); /* Dourado pálido para brilhos */
}

/* Reset básico e fontes */
body {
   margin: 0;
   font-family: 'Lato', sans-serif; /* Fonte principal para parágrafos */
   font-weight: 400;
   background-color: var(--body-bg);
   /* Textura Sutil (opcional, certifique-se que 'img/subtle-noise.png' existe) */
   background-image: linear-gradient(160deg, var(--bg-gradient-start), var(--bg-gradient-end)), url('img/subtle-noise.png');
   background-blend-mode: overlay; /* Mistura o gradiente com a textura */
   color: var(--text-light);
   line-height: 1.7;
   overflow-x: hidden; /* Evita scroll horizontal */
   cursor: default; /* Cursor padrão se não usar personalizado */
}

/* Estilo da Barra de Rolagem (Webkit - Chrome, Safari, Edge) */
::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-track { background: var(--scrollbar-track-bg); box-shadow: inset 0 0 3px rgba(0,0,0,0.3); }
::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-bg); border-radius: 5px; border: 1px solid var(--scrollbar-track-bg); }
::-webkit-scrollbar-thumb:hover { background-color: var(--scrollbar-thumb-hover-bg); }


/* Fontes para Títulos */
h1, h2, h3 {
  font-family: 'Merriweather', serif; /* Fonte serifada para títulos */
  font-weight: 700;
}

/* --- Barra de Progresso --- */
#progress-bar {
   position: fixed;
   top: 0;
   left: 0;
   height: 5px;
   width: 0%; /* Começa com 0, JS atualiza */
   background: var(--accent-purple);
   z-index: 10001; /* Acima de quase tudo */
   transition: width 0.1s linear; /* Transição suave */
   box-shadow: 0 0 10px var(--accent-purple); /* Brilho sutil */
}

/* --- Flores Fixas Animadas --- */
.flower-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* Não interfere com cliques */
  z-index: 0; /* Fica no fundo */
  overflow: hidden; /* Garante que as flores não causem scroll */
}
.flower {
  position: absolute;
  opacity: 0; /* JS controla opacidade baseada no scroll */
  animation-name: flower-fade-float; /* Animação padrão */
  animation-duration: 15s;          /* Duração padrão */
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
  transition: opacity 1.2s ease-out;
}
.flower-yellow { color: var(--flower-yellow); }
.flower-purple { color: var(--flower-purple); }
.flower-pink-subtle { color: var(--flower-pink-subtle); } /* Nova cor */
.flower-sparkle { /* Nova classe para brilhos */
   color: var(--flower-sparkle-color);
   text-shadow: 0 0 8px var(--flower-sparkle-color); /* Brilho mais intenso para sparkles */
}

/* Animação Padrão (a que você já tem) */
@keyframes flower-fade-float {
  0%, 100% { transform: translateY(20px) rotate(var(--initial-rotate, 0deg)); }
  50% { transform: translateY(-15px) rotate(var(--initial-rotate, 10deg)); }
}

/* Variação 1: Flutuação Mais Suave e Lenta */
.flower-gentle {
  animation-name: flower-float-gentle;
  animation-duration: 25s; /* Mais lento */
}
@keyframes flower-float-gentle {
  0%, 100% { transform: translateY(10px) rotate(var(--initial-rotate, 0deg)); } /* Menos movimento vertical */
  50% { transform: translateY(-10px) rotate(var(--initial-rotate, 5deg)); }
}

/* Variação 2: Flutuação Mais Rápida e Curta (para partículas menores como brilhos) */
.flower-fast {
  animation-name: flower-float-fast;
  animation-duration: 10s; /* Mais rápido */
}
@keyframes flower-float-fast {
  0%, 100% { transform: translateY(5px) rotate(var(--initial-rotate, 0deg)); }
  50% { transform: translateY(-5px) rotate(var(--initial-rotate, 15deg)); }
}

/* Variação 3: Com Leve Desvio Horizontal (simulando brisa) */
.flower-drift {
  animation-name: flower-float-drift;
  animation-duration: 20s;
}
@keyframes flower-float-drift {
  0%     { transform: translate(0px, 20px) rotate(var(--initial-rotate, 0deg)); }
  25%    { transform: translate(15px, -5px) rotate(var(--initial-rotate, 5deg)); } /* Desvia para direita */
  50%    { transform: translate(0px, -15px) rotate(var(--initial-rotate, 10deg)); }
  75%    { transform: translate(-15px, 0px) rotate(var(--initial-rotate, 15deg)); } /* Desvia para esquerda */
  100%   { transform: translate(0px, 20px) rotate(var(--initial-rotate, 0deg)); }
}

/* Delays diferentes para cada flor para não sincronizar (mantido do original, pode ser removido se definir delays no JS ou se a variação de animação for suficiente) */
.flower:nth-child(1) { animation-delay: 0s; }
.flower:nth-child(2) { animation-delay: 3s; }
.flower:nth-child(3) { animation-delay: 6s; }
.flower:nth-child(4) { animation-delay: 9s; }
.flower:nth-child(5) { animation-delay: 12s; }
.flower:nth-child(6) { animation-delay: 1.5s; }
.flower:nth-child(7) { animation-delay: 4.5s; }
.flower:nth-child(8) { animation-delay: 7.5s; }
.flower:nth-child(9) { animation-delay: 10.5s; }
.flower:nth-child(10) { animation-delay: 0.5s; } /* Delay para nova flor */
.flower:nth-child(11) { animation-delay: 2.5s; } /* Delay para nova flor */
/* --- Fim Flores --- */


/* --- Preloader --- */
#preloader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--body-bg); /* Mesmo fundo do body */
  z-index: 9999; /* Acima de tudo, exceto barra de progresso */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 1; /* Começa visível */
  visibility: visible;
  transition: opacity 0.6s ease-out 0.3s, visibility 0.6s ease-out 0.3s; /* Transição suave para sumir */
}
#preloader .loader-heart {
  font-size: 4rem;
  color: var(--loader-color);
  animation: preloader-heartbeat 1s infinite; /* Animação de pulsar */
}
#preloader p {
  margin-top: 15px;
  font-family: 'Lato', sans-serif;
  color: var(--text-light);
  opacity: 0.8;
}
@keyframes preloader-heartbeat { /* Animação do coração */
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}
/* Quando o body tem a classe 'loaded' (adicionada pelo JS), o preloader some */
body.loaded #preloader {
  opacity: 0;
  visibility: hidden;
}
/* --- Fim Preloader --- */


/* Estilos do Cabeçalho com Glassmorphism */
header {
  background: var(--header-footer-bg); /* Fundo semi-transparente */
  color: #ffffff;
  text-align: center;
  padding: 3vh 20px; /* Padding responsivo */
  box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* Sombra */
  position: sticky; /* Fica fixo no topo ao rolar */
  top: 0;
  z-index: 100; /* Acima do conteúdo principal */
  backdrop-filter: blur(8px); /* Efeito de vidro */
  -webkit-backdrop-filter: blur(8px); /* Para Safari */
  border-bottom: 1px solid rgba(176, 176, 176, 0.15); /* Linha sutil abaixo */
}
header h1 {
  margin: 0;
  font-size: clamp(1.8em, 4vw, 2.8em); /* Tamanho de fonte responsivo */
  font-weight: 700;
  letter-spacing: 1px;
  opacity: 0; /* Animação de entrada */
  animation: fadeInDown 1s 0.5s ease-out forwards;
  color: var(--text-light);
}
header .birthday-header {
  margin: 5px 0 0 0;
  font-size: clamp(1em, 2.5vw, 1.5em); /* Tamanho responsivo */
  font-weight: 400;
  color: var(--accent-secondary);
  letter-spacing: 1px;
  opacity: 0; /* Animação de entrada */
  animation: fadeInUp 1s 0.8s ease-out forwards;
}


/* Estilo das Seções de Momento */
main {
  width: 100%;
  position: relative; /* Necessário para z-index funcionar */
  z-index: 10; /* Acima das flores, abaixo do header/footer */
}
.moment-section {
  display: flex; /* Layout lado a lado (imagem/texto) */
  justify-content: space-around; /* Espaço entre os containers */
  align-items: center; /* Alinha itens verticalmente (padrão) */
  min-height: 90vh; /* Altura mínima da seção */
  padding: 10vh 7vw; /* Espaçamento interno responsivo */
  box-sizing: border-box;
  gap: 5vw; /* Espaço entre imagem e texto */
  position: relative;
  overflow: hidden; /* Evita conteúdo vazando */
  z-index: 1; /* Abaixo de elementos com z-index maior */
  background: linear-gradient(rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0)); /* Gradiente sutil */
  border-bottom: 1px solid rgba(176, 176, 176, 0.1); /* Linha sutil entre seções */
}
/* Inverte a ordem para imagem na direita */
.moment-section.section-image-right {
  flex-direction: row-reverse;
}

/* Alinhamento Vertical Alternado (Desktop) */
/* Seção com imagem à esquerda: Imagem sobe, Texto desce */
.moment-section.section-image-left .media-container { align-self: flex-start; margin-top: 5vh; }
.moment-section.section-image-left .text-container { align-self: flex-end; margin-bottom: 5vh; }
/* Seção com imagem à direita: Texto sobe, Imagem desce */
.moment-section.section-image-right .text-container { align-self: flex-start; margin-top: 5vh; }
.moment-section.section-image-right .media-container { align-self: flex-end; margin-bottom: 5vh; }

/* Animação de Entrada para Elementos (controlada pelo JS com Intersection Observer) */
.media-container.animate-me,
.text-container.animate-me,
.romantic-quote.animate-me,
.letter-section.animate-me,
.parallax-section.animate-me, /* Adicionado para a seção parallax */
#countdown-section.animate-me { /* Adicionado para a seção de contagem */
  opacity: 0; /* Começa invisível */
  transition: opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
  transition-delay: 0.2s; /* Pequeno delay inicial */
}
/* Direção da animação baseada na posição */
.section-image-left .media-container.animate-me { transform: translateX(-50px) scale(0.95); }
.section-image-left .text-container.animate-me { transform: translateX(50px) scale(0.95); }
.section-image-right .text-container.animate-me { transform: translateX(-50px) scale(0.95); }
.section-image-right .media-container.animate-me { transform: translateX(50px) scale(0.95); }
.romantic-quote.animate-me { transform: translateY(30px) scale(0.98); }
.parallax-section.animate-me, /* Animação genérica de entrada para parallax/countdown */
#countdown-section.animate-me {
   transform: translateY(20px) scale(0.98);
}


/* Estado Visível (quando a classe 'visible' é adicionada pelo JS) */
.media-container.animate-me.visible,
.text-container.animate-me.visible,
.romantic-quote.animate-me.visible,
.letter-section.animate-me.visible,
.parallax-section.animate-me.visible, /* Adicionado */
#countdown-section.animate-me.visible { /* Adicionado */
  opacity: 1; /* Torna visível */
  transform: translateX(0) translateY(0) scale(1); /* Volta à posição original */
}

/* Stagger (atraso) na animação para efeito mais dinâmico */
.section-image-left .text-container.animate-me.visible,
.section-image-right .media-container.animate-me.visible {
  transition-delay: 0.4s; /* O segundo elemento da seção anima um pouco depois */
}
.romantic-quote.animate-me.visible {
  transition-delay: 0.3s;
}


/* Container de Mídia (Imagem, Vídeo, Mapa) */
.media-container {
  flex: 1; /* Ocupa espaço flexível */
  max-width: 48%; /* Limita a largura */
  text-align: center;
  position: relative;
  box-sizing: border-box;
}

/* Estilo e Tamanho da Mídia (Com Borda Direta) */
.moment-section img,
.moment-section video {
  display: block;
  max-width: 100%; /* Garante responsividade */
  max-height: 65vh; /* Limita a altura máxima */
  width: auto; /* Mantém proporção */
  height: auto; /* Mantém proporção */
  object-fit: contain; /* Garante que toda a mídia seja visível */
  margin-left: auto;
  margin-right: auto; /* Centraliza */
  border: 6px solid var(--media-border-color); /* Borda semi-transparente */
  border-radius: 15px; /* Bordas arredondadas */
  box-shadow: 0 10px 25px var(--shadow-color); /* Sombra */
  transition: transform 0.3s ease, box-shadow 0.3s ease; /* Efeito suave no hover */
  overflow: hidden; /* Garante que nada vaze da borda arredondada */
  position: relative; /* Para contexto de empilhamento se necessário */
}
/* Efeito de Hover na Mídia */
.moment-section .media-container:hover img,
.moment-section .media-container:hover video {
  transform: scale(1.02); /* Leve aumento */
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6); /* Sombra mais pronunciada */
}
/* Cursor específico para imagens que abrem lightbox */
.moment-section img.lightbox-trigger {
   cursor: zoom-in;
}


/* Estilo Container do Mapa */
.map-container {
  padding: 0 !important; /* Remove padding interno */
  overflow: hidden; /* Garante que o iframe respeite as bordas */
  border-radius: 15px; /* Bordas arredondadas */
  border: 6px solid var(--media-border-color); /* Mesma borda das mídias */
  box-shadow: 0 10px 25px var(--shadow-color); /* Mesma sombra */
  transition: box-shadow 0.3s ease; /* Transição apenas na sombra */
  height: 65vh; /* Altura similar às outras mídias */
  max-height: 500px; /* Limite máximo de altura */
}
.map-container:hover {
  transform: none !important; /* Sem scale no hover */
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6); /* Apenas a sombra muda */
}
.map-container iframe {
  display: block; /* Remove espaço extra abaixo */
  width: 100%;
  height: 100%; /* Ocupa todo o container */
  border: none !important; /* Remove borda padrão do iframe */
  border-radius: 8px; /* Arredonda cantos internos do mapa (se possível) */
}


/* Container de Texto */
.text-container {
  flex: 1; /* Ocupa espaço flexível */
  max-width: 48%; /* Limita a largura */
  box-sizing: border-box;
  padding: 25px 30px; /* Espaçamento interno */
  background: rgba(30, 30, 30, 0.2); /* Fundo sutil semi-transparente */
  backdrop-filter: blur(4px); /* Leve desfoque no fundo */
  -webkit-backdrop-filter: blur(4px);
  border-radius: 15px;
  border: 1px solid rgba(176, 176, 176, 0.15); /* Borda sutil */
  box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* Sombra */
}
.text-container h2 {
  font-size: clamp(1.8em, 4vw, 2.5em); /* Tamanho responsivo */
  margin-bottom: 25px;
  color: var(--accent-purple); /* Cor de destaque */
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8); /* Sombra no texto do título */
  display: flex; /* Para alinhar ícone e texto */
  align-items: center;
}
.section-icon { /* Estilo do emoji/ícone no título da seção */
  margin-right: 15px;
  font-size: 0.9em; /* Pouco menor que o título */
  opacity: 0.7;
  color: var(--accent-secondary); /* Cor secundária */
}
.text-container p {
  font-size: clamp(1.1em, 2.0vw, 1.25em); /* Tamanho de fonte responsivo p/ parágrafos */
  font-weight: 400;
  color: var(--text-light);
}

/* Estilo Citações Românticas */
.romantic-quote {
  display: block;
  max-width: 600px; /* Largura máxima */
  margin: 8vh auto; /* Espaçamento vertical e centralização horizontal */
  padding: 30px 40px; /* Espaçamento interno */
  border-left: 5px solid var(--quote-border-color); /* Borda roxa à esquerda */
  font-family: 'Merriweather', serif; /* Fonte serifada */
  font-style: italic; /* Itálico */
  font-size: clamp(1.1em, 2.2vw, 1.4em); /* Tamanho responsivo */
  color: rgba(224, 224, 224, 0.85); /* Cor levemente transparente */
  background: rgba(255, 255, 255, 0.02); /* Fundo quase imperceptível */
  border-radius: 5px;
  position: relative;
  z-index: 5; /* Acima das flores */
}
.romantic-quote cite { /* Estilo da fonte da citação */
  display: block;
  margin-top: 15px;
  font-style: normal; /* Remove itálico padrão da tag cite */
  font-size: 0.9em;
  color: rgba(176, 176, 176, 0.7); /* Cinza claro */
  text-align: right; /* Alinha à direita */
}


/* --- Seção Carta Aberta com Animação de Abertura --- */
.letter-section {
  padding: 10vh 5vw; /* Espaçamento */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh; /* Altura mínima */
  box-sizing: border-box;
  perspective: 1500px; /* Efeito 3D para a animação */
  overflow: hidden; /* Evita barras de rolagem extras */
  position: relative;
  background: transparent; /* Fundo transparente para ver o body */
  z-index: 2; /* Acima das flores */
}
/* Fundo do Envelope (decoração) */
.envelope-back {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80%;
  max-width: 780px; /* Tamanho máximo do envelope */
  height: 60%;
  max-height: 500px; /* Altura máxima */
  background: linear-gradient(145deg, var(--envelope-gradient-start, #3c1f4a), var(--envelope-gradient-end, #2a1a30)); /* Gradiente roxo escuro */
  border-radius: 8px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4); /* Sombra */
  transform: translate(-50%, -50%) rotateX(10deg); /* Posição e leve rotação 3D */
  opacity: 0; /* Começa invisível */
  z-index: 1; /* Atrás da carta */
  transition: opacity 0.8s ease-out;
}
/* Envelope aparece quando a seção da carta está visível */
.letter-section.visible .envelope-back {
  opacity: 1;
  transition-delay: 0.1s;
}
/* Conteúdo da Carta */
.letter-content {
  background-color: var(--letter-bg); /* Fundo de papel */
  color: var(--letter-text); /* Texto escuro */
  padding: 50px 60px; /* Espaçamento interno */
  border-radius: 5px;
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2); /* Sombra da carta */
  max-width: 750px; /* Largura máxima da carta */
  border: 1px solid rgba(0, 0, 0, 0.1); /* Borda sutil */
  position: relative; /* Para z-index funcionar */
  margin: 0; /* Remove margens padrão */
  width: 90%; /* Largura responsiva */
  z-index: 2; /* Acima do envelope */
  opacity: 0; /* Começa invisível */
  transform-origin: top center; /* Ponto de rotação da animação */
  transform: rotateX(-70deg) scale(0.8) translateY(-30px); /* Posição inicial da animação (dobrada) */
  transition: transform 1.3s cubic-bezier(0.19, 1, 0.22, 1) 0.5s, opacity 1s ease-out 0.5s; /* Animação de desdobrar */
}
/* Carta desdobra quando a seção está visível */
.letter-section.visible .letter-content {
  opacity: 1;
  transform: rotateX(0deg) scale(1) translateY(0); /* Posição final (aberta) */
}
/* Animação de entrada para cada parágrafo da carta */
.letter-content p.letter-paragraph {
  opacity: 0;
  transform: translateY(15px); /* Começa um pouco abaixo */
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
/* Parágrafos aparecem quando a seção está visível */
.letter-section.visible .letter-content p.letter-paragraph {
  opacity: 1;
  transform: translateY(0); /* Volta à posição normal */
}
/* Atraso sequencial para os parágrafos aparecerem um após o outro */
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(1) { transition-delay: 1.8s; }
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(2) { transition-delay: 2.0s; }
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(3) { transition-delay: 2.2s; }
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(4) { transition-delay: 2.4s; } /* birthday-wish */
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(5) { transition-delay: 2.6s; }
.letter-section.visible .letter-content p.letter-paragraph:nth-of-type(6) { transition-delay: 2.8s; } /* signature (o <p> que contém) */

/* Estilos do conteúdo da carta */
.letter-content h2 { /* Título "Meu Amor..." */
  font-family: 'Dancing Script', cursive; /* Fonte cursiva */
  font-size: clamp(2.2em, 5vw, 3em); /* Tamanho responsivo */
  color: var(--letter-accent); /* Roxo */
  text-align: left;
  margin-bottom: 30px;
  margin-top: 0;
}
.letter-content p { /* Parágrafos normais */
  font-family: 'Merriweather', serif; /* Fonte serifada */
  font-size: clamp(1em, 1.8vw, 1.15em); /* Tamanho responsivo */
  line-height: 1.8;
  margin-bottom: 20px;
  text-align: justify; /* Texto justificado */
  color: var(--letter-text);
}
.letter-content .birthday-wish { /* Parágrafo "Feliz Aniversário..." */
  font-weight: bold;
  font-size: clamp(1.1em, 2vw, 1.25em); /* Pouco maior */
  color: var(--accent-purple); /* Roxo */
  text-align: center; /* Centralizado */
  margin-top: 30px;
  margin-bottom: 25px;
}
.letter-content .signature { /* Parágrafo da assinatura */
  text-align: right; /* Assinatura à direita */
  margin-top: 40px;
  margin-bottom: 0;
  font-family: 'Dancing Script', cursive; /* Fonte cursiva */
  font-size: clamp(1.4em, 2.5vw, 1.8em); /* Tamanho da assinatura */
  color: var(--letter-accent); /* Roxo */
}
/* Animação de "digitação" para a Assinatura */
.signature.animate-signature {
  display: inline-block; /* Necessário para width funcionar */
  border-right: 2px solid transparent; /* Cursor piscando (inicialmente transparente) */
  white-space: nowrap; /* Impede quebra de linha durante animação */
  overflow: hidden; /* Esconde o texto que ainda não foi "digitado" */
  width: 0; /* Começa sem largura */
  opacity: 0; /* Começa invisível (JS controla a classe .writing) */
}
/* Estado quando a animação de escrita está ativa (classe .writing adicionada pelo JS) */
.signature.animate-signature.writing {
  opacity: 1; /* Torna visível */
  width: 100%; /* Expande a largura para revelar o texto */
  /* Animação de digitação + cursor piscando */
  animation: typing 2.5s steps(30, end) 0.5s forwards, blink-caret .75s step-end infinite;
  animation-delay: 3.2s; /* Começa após os parágrafos aparecerem */
  border-right-color: var(--letter-accent); /* Torna o cursor visível */
}
@keyframes typing { /* Animação que aumenta a largura */
  from { width: 0 }
  to { width: 100% }
}
@keyframes blink-caret { /* Animação que pisca o cursor */
  from, to { border-color: transparent }
  50% { border-color: var(--letter-accent); }
}
/* --- Fim Carta --- */


/* --- Emoji Popup (acionado por JS no clique de mídia) --- */
.popup-emoji {
  position: absolute; /* Posicionado pelo JS */
  z-index: 200; /* Acima da maioria dos elementos */
  font-size: clamp(2.5rem, 5vw, 4rem); /* Tamanho responsivo do emoji */
  opacity: 0; /* Começa invisível */
  animation: emoji-pop 1.2s ease-out forwards; /* Animação de surgir e sumir */
  pointer-events: none; /* Não interfere com cliques */
  text-shadow: 0 2px 5px rgba(0,0,0,0.5); /* Sombra no emoji */
}
@keyframes emoji-pop { /* Animação do emoji */
  0% { opacity: 0; transform: scale(0.3); }
  20% { opacity: 1; transform: scale(1.1); }
  40% { transform: scale(0.9); }
  60% { transform: scale(1.05); }
  80% { transform: scale(0.95); }
  95% { opacity: 1; }
  100% { opacity: 0; transform: scale(0.5); } /* Some no final */
}

/* --- Botão de Música --- */
#music-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 101; /* Acima do conteúdo, abaixo de modais */
  background-color: rgba(18, 18, 18, 0.6); /* Fundo escuro semi-transparente */
  color: var(--text-light); /* Texto claro */
  border: 1px solid rgba(176, 176, 176, 0.3); /* Borda sutil */
  border-radius: 50%; /* Círculo */
  width: 50px;
  height: 50px;
  font-size: 10px; /* Tamanho do texto "Música"/"Pausar" */
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.3s ease, border-color 0.3s ease, color 0.3s ease;
  backdrop-filter: blur(3px); /* Leve desfoque */
  -webkit-backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
  font-family: 'Lato', sans-serif;
  font-weight: bold;
}
#music-toggle:hover {
  background-color: rgba(18, 18, 18, 0.8); /* Mais opaco no hover */
  transform: scale(1.1); /* Aumenta um pouco */
}
/* Estilo quando a música está tocando (classe .playing adicionada por JS) */
#music-toggle.playing {
  border-color: var(--accent-purple); /* Borda roxa */
  color: var(--accent-purple); /* Texto roxo */
}

/* Rodapé (Estilo Glassmorphism similar ao Header) */
footer {
  text-align: center;
  padding: 30px 20px;
  margin-top: 0; /* Remove espaço extra acima */
  font-size: 1em;
  font-weight: 400;
  color: rgba(224, 224, 224, 0.7); /* Cinza claro semi-transparente */
  background-color: var(--header-footer-bg); /* Mesmo fundo do header */
  position: relative; /* Necessário para z-index */
  z-index: 10; /* Garante que fique acima das flores */
  backdrop-filter: blur(8px); /* Efeito vidro */
  -webkit-backdrop-filter: blur(8px);
  border-top: 1px solid rgba(176, 176, 176, 0.15); /* Linha sutil acima */
}

/* --- Keyframes para Animações Genéricas --- */
@keyframes fadeInDown { /* Usado no H1 do Header */
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUp { /* Usado no subtítulo do Header */
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
/* Animação de Batida (Exemplo, não usado diretamente no código atual) */
@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  10%, 30% { transform: scale(0.9); }
  20%, 40%, 60%, 80% { transform: scale(1.1); }
  50%, 70%, 90% { transform: scale(1.05); }
}

/* --- Lightbox Styles --- */
#lightbox-overlay {
  position: fixed; /* Fixo na tela */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(10, 10, 10, 0.9); /* Fundo bem escuro e opaco */
  z-index: 10000; /* Acima de TUDO, exceto modal secreto talvez */
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0; /* Começa invisível */
  visibility: hidden;
  transition: opacity 0.4s ease, visibility 0.4s ease; /* Transição suave */
  backdrop-filter: blur(5px); /* Desfoque no fundo */
  -webkit-backdrop-filter: blur(5px);
}
/* Estado ativo do Lightbox */
#lightbox-overlay.active {
  opacity: 1;
  visibility: visible;
}
/* Imagem dentro do Lightbox */
#lightbox-image {
  display: block;
  max-width: 90%; /* Largura máxima */
  max-height: 85%; /* Altura máxima */
  object-fit: contain; /* Garante que a imagem inteira caiba */
  box-shadow: 0 0 50px rgba(0,0,0,0.7); /* Sombra forte */
  border: 3px solid var(--accent-secondary); /* Borda prata */
  border-radius: 5px;
  transform: scale(0.8); /* Animação de entrada (zoom) */
  transition: transform 0.4s ease;
}
/* Imagem no estado ativo */
#lightbox-overlay.active #lightbox-image {
  transform: scale(1); /* Zoom para tamanho normal */
}
/* Botão de fechar do Lightbox */
#lightbox-close {
  position: absolute;
  top: 20px;
  right: 30px;
  font-size: 3rem; /* Tamanho do 'X' */
  color: var(--accent-secondary); /* Cor prata */
  cursor: pointer;
  text-shadow: 0 0 5px black; /* Sombra para destacar */
  transition: transform 0.3s ease, color 0.3s ease;
}
#lightbox-close:hover {
  transform: scale(1.2) rotate(90deg); /* Aumenta e gira no hover */
  color: white; /* Muda para branco */
}


/* --- Responsividade --- */

/* Telas Médias (Tablets e Desktops menores) */
@media (max-width: 992px) {
   .moment-section {
       padding: 8vh 6vw; /* Menos padding */
       gap: 4vw; /* Menos espaço entre elementos */
       min-height: auto; /* Altura automática */
       align-items: stretch; /* Permite que os containers cresçam se necessário */
   }
  /* Ajusta alinhamento vertical alternado */
  .moment-section.section-image-left .media-container,
  .moment-section.section-image-right .text-container { margin-top: 0; }
  .moment-section.section-image-left .text-container,
  .moment-section.section-image-right .media-container { margin-bottom: 0; }

   .letter-content {
       padding: 40px 45px;
       max-width: 90%;
   }
   .romantic-quote {
       max-width: 85%;
       margin: 6vh auto;
   }
   .media-container { max-width: 55%; } /* Permite um pouco mais de largura */
   .text-container { max-width: 55%; }
   .map-container { height: 50vh; } /* Reduz altura do mapa */
}

/* Telas Pequenas (Smartphones) */
@media (max-width: 768px) {
   /* header { position: static; } /* Header deixa de ser sticky se atrapalhar */

   /* Seções ficam em coluna */
   .moment-section,
   .moment-section.section-image-right {
       flex-direction: column; /* Empilha imagem e texto */
       min-height: auto;
       padding: 10vh 5vw;
       text-align: center;
       gap: 35px; /* Espaço vertical entre imagem e texto */
       align-items: center; /* Centraliza os itens empilhados */
   }

   /* Remove alinhamento vertical alternado e animações de entrada */
   .media-container,
   .text-container {
       max-width: 95%; /* Ocupa quase toda a largura */
       flex: none; /* Remove flex basis */
       width: auto;
       align-self: center !important; /* Garante centralização */
       margin: 0 !important; /* Remove margens de alinhamento */
       transform: none !important; /* Remove transform da animação */
       opacity: 1 !important; /* Garante visibilidade */
       transition: none !important; /* Remove transição de entrada */
       padding: 15px; /* Padding padrão */
       /* Remove estilos de fundo/borda do container de texto no mobile */
       background: none;
       backdrop-filter: none;
       border: none;
       box-shadow: none;
   }
   .media-container {
       margin-bottom: 0 !important; /* Reset de margem */
       max-height: none; /* Altura automática */
       padding: 0; /* Sem padding extra */
   }
   .moment-section img,
   .moment-section video {
       border-width: 3px; /* Borda mais fina */
       max-height: 50vh; /* Limita altura no mobile */
   }
    .map-container {
       border-width: 3px;
       height: 45vh; /* Altura do mapa no mobile */
       max-width: 95%;
   }


   /* Garante espaço entre texto e imagem quando empilhados */
   .moment-section.section-image-left .media-container { margin-bottom: 35px !important; }
   .moment-section.section-image-right .text-container { margin-bottom: 35px !important; }


   .text-container h2 {
       justify-content: center; /* Centraliza título e ícone */
   }
   .text-container p {
       font-size: clamp(1em, 4vw, 1.15em); /* Ajusta tamanho do texto */
   }

   .romantic-quote {
       max-width: 90%;
       margin: 5vh auto;
       padding: 25px;
       font-size: clamp(1em, 4vw, 1.2em);
   }

   /* Ajustes na seção da carta para mobile */
   .letter-section {
       padding: 10vh 5vw;
       min-height: auto;
       /* Remove transform/opacity da animação de entrada */
       transform: none !important;
       opacity: 1 !important;
       transition: none !important;
       perspective: none; /* Desativa perspectiva 3D */
   }
   .envelope-back { display: none; } /* Esconde decoração do envelope */
   .letter-content {
       padding: 30px 25px; /* Menos padding */
       max-width: 95%;
       /* Remove transform/opacity da animação de entrada */
       opacity: 1;
       transform: none;
       transition: none;
   }
   .letter-content p {
       text-align: left; /* Deixa parágrafos alinhados à esquerda */
   }
   /* Remove animação de entrada dos parágrafos */
   .letter-content p.letter-paragraph {
       opacity: 1;
       transform: none;
       transition: none;
   }
   .letter-content .signature {
       font-size: clamp(1.3em, 5vw, 1.6em); /* Ajusta tamanho da assinatura */
       text-align: center; /* Centraliza assinatura */
   }
   /* Desativa animação de escrita da assinatura */
   .signature.animate-signature,
   .signature.animate-signature.writing {
       animation: none;
       width: auto; /* Largura automática */
       border-right-color: transparent; /* Sem cursor */
       opacity: 1;
       display: block; /* Para centralizar */
       margin: 0 auto;
       white-space: normal; /* Permite quebra de linha se necessário */
   }

   .flower-overlay { display: none; } /* Esconde flores no mobile (performance) */

   #music-toggle { /* Botão de música menor */
       width: 45px;
       height: 45px;
       font-size: 9px;
       bottom: 15px;
       right: 15px;
   }
   /* footer { backdrop-filter: none; -webkit-backdrop-filter: none; } */ /* Remove blur se pesar */
}

/* ============================================================ */
/* ===== ESTILOS ADICIONADOS PARA ENVELOPE E MODAL SECRETO ==== */
/* ============================================================ */

/* ===== Estilos para o Gatilho da Mensagem Secreta (Envelope) ===== */
#hidden-message-trigger {
   display: block; /* Para ocupar a linha e permitir centralizar/margem */
   text-align: center; /* Centraliza o emoji */
   font-size: 2.5em; /* Tamanho do emoji */
   margin-top: 25px; /* Espaço acima do envelope, abaixo do vídeo */
   margin-bottom: 15px; /* Espaço abaixo do envelope */
   cursor: pointer; /* Mãozinha ao passar o mouse */
   transition: transform 0.3s ease, opacity 0.3s ease; /* Efeito suave ao passar o mouse */
   opacity: 0.8; /* Leve transparência inicial */
   /* Garante que não herde bordas ou fundos estranhos */
   border: none;
   background: none;
   padding: 0;
}

#hidden-message-trigger:hover {
   transform: scale(1.15); /* Aumenta um pouco no hover */
   opacity: 1; /* Opacidade total no hover */
}


/* ===== Estilos para o Modal da Mensagem Secreta ===== */
#hidden-message-modal {
   position: fixed; /* Fica fixo na tela */
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background-color: rgba(18, 18, 18, 0.85); /* Fundo escuro semi-transparente */
   z-index: 11000; /* Acima do lightbox e outros elementos */
   display: flex; /* Usa flexbox para centralizar o conteúdo */
   justify-content: center; /* Centraliza horizontalmente */
   align-items: center; /* Centraliza verticalmente */
   opacity: 0; /* Começa invisível */
   visibility: hidden; /* Começa escondido */
   transition: opacity 0.4s ease, visibility 0.4s ease; /* Transição suave */
   backdrop-filter: blur(5px); /* Efeito de desfoque no fundo (opcional) */
   -webkit-backdrop-filter: blur(5px); /* Para compatibilidade */
   padding: 20px; /* Adiciona padding para evitar que o conteúdo toque as bordas em telas pequenas */
   box-sizing: border-box;
}

#hidden-message-modal.active {
   opacity: 1; /* Fica visível */
   visibility: visible; /* Fica "ativo" */
}

#hidden-message-modal .modal-content {
   background-color: var(--letter-bg, #f8f8f8); /* Fundo claro, como o da carta */
   color: var(--letter-text, #2c2c2c); /* Texto escuro */
   padding: 40px 50px; /* Espaçamento interno */
   border-radius: 10px; /* Bordas arredondadas */
   max-width: 550px; /* Largura máxima do modal */
   width: 90%; /* Largura responsiva (era 85%, ajustado para consistência) */
   text-align: center; /* Centraliza o texto */
   position: relative; /* Necessário para posicionar o botão de fechar */
   box-shadow: 0 8px 30px var(--shadow-color, rgba(0, 0, 0, 0.6)); /* Sombra */
   transform: scale(0.9); /* Começa um pouco menor */
   transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Transição com efeito elástico */
   box-sizing: border-box;
}

#hidden-message-modal.active .modal-content {
   transform: scale(1); /* Volta ao tamanho normal quando ativo */
}

#hidden-message-modal .modal-content p {
   font-family: 'Merriweather', serif; /* Fonte similar à da carta */
   font-size: clamp(1.4em, 4vw, 1.8em); /* Tamanho grande e responsivo (ajustado clamp)*/
   line-height: 1.6;
   margin: 0; /* Remove margens padrão do parágrafo */
   color: var(--accent-purple); /* Cor roxa para destaque */
   font-weight: bold;
}

#hidden-message-modal .modal-close {
   position: absolute; /* Posicionamento absoluto dentro do modal-content */
   top: 10px;
   right: 15px;
   font-size: 2.5rem; /* Tamanho do 'X' */
   color: var(--letter-text, #555); /* Cor do 'X' */
   cursor: pointer;
   line-height: 1;
   transition: transform 0.2s ease, color 0.2s ease;
   padding: 5px; /* Área de clique maior */
}

#hidden-message-modal .modal-close:hover {
   color: var(--accent-purple); /* Muda para roxo no hover */
   transform: rotate(90deg) scale(1.1); /* Gira e aumenta um pouco */
}


/* ============================================================ */
/* ===== ESTILOS PARA SEÇÃO PARALLAX E CONTAGEM REGRESSIVA ==== */
/* ============================================================ */

/* --- Estilos para Seção Parallax (Método CSS Simples) --- */
.parallax-section {
   /* Herdará muitos estilos de .moment-section, mas pode ter os seus próprios */
   min-height: 60vh; /* Ajuste a altura conforme necessário */
   background-image: url('img/sua-imagem-de-fundo-parallax.jpg'); /* **SUBSTITUA PELO CAMINHO DA SUA IMAGEM** */
   background-attachment: fixed; /* Efeito parallax */
   background-position: center;
   background-repeat: no-repeat;
   background-size: cover;
   color: var(--text-light); /* Cor do texto sobre o parallax, ajuste se necessário */
   /* display: flex; (já herdado de .moment-section se esta classe também for usada) */
   /* justify-content: center; (já herdado) */
   /* align-items: center; (já herdado) */
   position: relative; /* Para z-index e posicionamento de conteúdo interno */
}

.parallax-content {
   background-color: rgba(18, 18, 18, 0.6); /* Overlay escuro para legibilidade */
   backdrop-filter: blur(3px);
   -webkit-backdrop-filter: blur(3px);
   padding: 30px 40px;
   border-radius: 10px;
   text-align: center;
   max-width: 70%;
   box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}
.parallax-content h2 {
   color: var(--accent-purple);
   margin-bottom: 15px;
}
.parallax-content p {
   font-size: clamp(1.1em, 2.2vw, 1.3em);
}

/* --- Estilos para Seção de Contagem Regressiva --- */
#countdown-section {
   padding: 8vh 5vw;
   text-align: center;
   background: linear-gradient(170deg, var(--bg-gradient-start), #2a1a30); /* Fundo escuro, com tom roxo */
   border-top: 1px solid rgba(176, 176, 176, 0.1);
   border-bottom: 1px solid rgba(176, 176, 176, 0.1);
   position: relative; /* Para o z-index da animação .animate-me */
   z-index: 5;
}

#countdown-section h2 {
   font-size: clamp(1.8em, 4vw, 2.5em);
   color: var(--accent-purple);
   margin-bottom: 10px;
}

.countdown-subtitle {
   font-size: clamp(1em, 2.5vw, 1.3em);
   color: var(--accent-secondary);
   margin-bottom: 30px;
}
.countdown-subtitle strong {
   color: var(--text-light);
}

#countdown-timer {
   display: flex;
   justify-content: center;
   gap: 15px; /* Espaço entre os blocos */
   margin-bottom: 20px;
   flex-wrap: wrap; /* Permite quebrar linha em telas menores */
}

.countdown-block {
   background-color: rgba(255, 255, 255, 0.05);
   padding: 15px 20px;
   border-radius: 8px;
   min-width: 80px; /* Largura mínima para cada bloco */
   border: 1px solid rgba(176, 176, 176, 0.2);
   box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.countdown-block span {
   display: block;
}

.countdown-block span:not(.label) { /* Números */
   font-size: clamp(2em, 6vw, 3em); /* Números grandes */
   font-weight: bold;
   color: var(--text-light);
   line-height: 1.1;
   font-family: 'Merriweather', serif; /* Fonte dos números */
}

.countdown-block .label { /* "Dias", "Horas", etc. */
   font-size: clamp(0.8em, 2vw, 1em);
   color: var(--accent-secondary);
   margin-top: 5px;
   text-transform: uppercase;
   letter-spacing: 0.5px;
}

.countdown-ended-message {
   font-size: clamp(1.2em, 3vw, 1.8em);
   color: var(--accent-pink-muted);
   font-weight: bold;
   margin-top: 20px;
}
.countdown-event-note {
   font-size: clamp(1em, 2.2vw, 1.3em); /* Aumentei um pouco */
   color: var(--accent-pink-muted);
   margin-top: 25px;
   font-style: italic;
   /* Animação de entrada já é cuidada pela classe .animate-me e .visible */
}
/* Estilo para a nota quando visível, caso precise de algo específico além do .animate-me.visible */
.countdown-event-note.visible {
   transition-delay: 0.6s !important; /* Garante que apareça um pouco depois da seção */
}


/* Responsividade para a contagem */
@media (max-width: 480px) {
   #countdown-timer {
       gap: 10px;
   }
   .countdown-block {
       padding: 10px 12px; /* Menor padding */
       min-width: 65px; /* Menor largura */
   }
   .countdown-block span:not(.label) {
       font-size: clamp(1.8em, 5vw, 2.5em);
   }
   .countdown-block .label {
       font-size: clamp(0.7em, 1.8vw, 0.9em);
   }
}